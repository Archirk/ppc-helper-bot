# ppc-helper-bot
Учебный проект для курса OTUS.

## Запуск
Запустить бота можно через терминал:  
```
python3 run.py --log [log-path] --config [config-path]
```  
log - адрес для логов(по умолчанию None)  
config - адрес файла конфигурации  
### Файл конфигурации
```json
{
  "ppc_helper":
  {
    "workers_count": 1
  },
  "bot":
  {
    "token": "",
    "parse_mode": "MARKDOWN"
  },
  "db_manager":
  {
    "host": "",
    "user": "",
    "password": "",
    "db": "",
    "port": 5432,
    "max_connections": 1,
    "tables_json": ""
  },
  "function_handlers":
  {
    "vk":
    {
      "app_id": 0,
      "client_secret": "",
      "token": "",
      "scope": 0,
      "api_version": ""
    }
  }
}
```
Схема работы

Бот работает в отдельном от основного процесса треде
Таск менеджер запускается в отдельном процессе и создает воркеров в количестве, указанном в конфиге
При иницилазации создается пул соединений из БД, одно из которых выдается боту, а другие - воркерам, поэтому важно чтобы максимально возможное количество соединений было = количество воркеров + 1
